{
  "permissions": {
    "allow": [
      "WebFetch(domain:www.thingiverse.com)",
      "WebFetch(domain:www.printables.com)",
      "Bash(curl:*)",
      "Bash(/tmp/fetch_detailed.sh << 'EOF'\n#!/bin/bash\n\nfetch_detailed\\(\\) {\n    local url=\"$1\"\n    local model_id=\"$2\"\n    \n    echo \"=== Model $model_id ===\"\n    \n    html=$\\(curl -s -L -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36\" \"$url\"\\)\n    \n    # Title and Author from page title\n    title=$\\(echo \"$html\" | grep -oP '\\(?<=<title>\\)[^<]+' | head -1\\)\n    model_name=$\\(echo \"$title\" | sed 's/ by .*//' | sed 's/ | Download.*//'\\)\n    author=$\\(echo \"$title\" | grep -oP 'by \\\\K[^|]+' | xargs\\)\n    \n    echo \"Title: $model_name\"\n    echo \"Author: $author\"\n    \n    # Try multiple methods for description\n    desc1=$\\(echo \"$html\" | grep -oP '\\(?<=<meta name=\"description\" content=\"\\)[^\"]+' | head -1\\)\n    desc2=$\\(echo \"$html\" | grep -oP '\\(?<=property=\"og:description\" content=\"\\)[^\"]+' | head -1\\)\n    desc3=$\\(echo \"$html\" | grep -oP '\\(?<=name=\"twitter:description\" content=\"\\)[^\"]+' | head -1\\)\n    \n    description=\"${desc1:-${desc2:-$desc3}}\"\n    echo \"Description: $description\"\n    \n    # Extract main image\n    img1=$\\(echo \"$html\" | grep -oP '\\(?<=property=\"og:image\" content=\"\\)[^\"]+' | head -1\\)\n    img2=$\\(echo \"$html\" | grep -oP '\\(?<=name=\"twitter:image\" content=\"\\)[^\"]+' | head -1\\)\n    \n    image=\"${img1:-$img2}\"\n    echo \"Image: $image\"\n    \n    echo \"---\"\n}\n\nfetch_detailed \"https://www.printables.com/model/989346\" \"989346\"\nfetch_detailed \"https://www.printables.com/model/889274\" \"889274\"\nfetch_detailed \"https://www.printables.com/model/866977\" \"866977\"\nfetch_detailed \"https://www.printables.com/model/1295874\" \"1295874\"\nfetch_detailed \"https://www.printables.com/model/214859\" \"214859\"\nfetch_detailed \"https://www.printables.com/model/755917\" \"755917\"\nfetch_detailed \"https://www.printables.com/model/259740\" \"259740\"\nEOF)",
      "Bash(chmod:*)",
      "Bash(/tmp/fetch_detailed.sh)",
      "Bash(python3:*)",
      "Bash(/tmp/fetch_all_printables.sh << 'EOF'\n#!/bin/bash\n\nextract_info\\(\\) {\n    local url=\"$1\"\n    local model_id=$\\(echo \"$url\" | grep -oP 'model/\\\\K[0-9]+'\\)\n    \n    echo \"=== Fetching Model $model_id ===\"\n    \n    html=$\\(curl -s -L -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36\" \"$url\" 2>/dev/null\\)\n    \n    if [ -z \"$html\" ]; then\n        echo \"ERROR: Failed to fetch\"\n        return\n    fi\n    \n    # Extract title\n    title=$\\(echo \"$html\" | grep -oP '\\(?<=<title>\\)[^<]+' | head -1 | sed 's/ by .*//' | sed 's/ | Download.*//' | xargs\\)\n    \n    # Extract summary/description from multiple possible locations\n    desc=$\\(echo \"$html\" | grep -oP 'class=\".*?summary.*?\"[^>]*>\\([^<]+\\)' | head -1 | sed 's/.*>//'\\)\n    if [ -z \"$desc\" ]; then\n        desc=$\\(echo \"$html\" | grep -oP '\"summary\":\"\\([^\"]+\\)\"' | head -1 | sed 's/\"summary\":\"//' | sed 's/\"$//'\\)\n    fi\n    \n    # Try to find category/tags\n    category=$\\(echo \"$html\" | grep -oP 'Category:[^<]*<[^>]*>\\([^<]+\\)' | head -1 | sed 's/.*>//'\\)\n    \n    echo \"Model: $model_id\"\n    echo \"Title: $title\"\n    echo \"Description: $desc\"\n    echo \"Category: $category\"\n    echo \"\"\n}\n\n# All Printables URLs\nextract_info \"https://www.printables.com/model/121742-sheikah-slate-accessibility-adapter\"\nextract_info \"https://www.printables.com/model/704535-quirkey-v4-accessibility-keyboard-for-one-handed-u\"\nextract_info \"https://www.printables.com/model/989346-xbox-thumbstick-extension-system-accessibility\"\nextract_info \"https://www.printables.com/model/253048-3d-printed-accessibility-button-for-go-baby-go-and\"\nextract_info \"https://www.printables.com/model/889274-adjustable-gaming-buttons-accessibility\"\nextract_info \"https://www.printables.com/model/866977-arc-accessibility-module-100mm\"\nextract_info \"https://www.printables.com/model/1295874-accessibility-joysticks\"\nextract_info \"https://www.printables.com/model/93460-xbox-controller-accessibility-mod\"\nextract_info \"https://www.printables.com/model/220907-xboxpc-copilot-controller-pedals\"\nextract_info \"https://www.printables.com/model/214286-mmc60-switch\"\nextract_info \"https://www.printables.com/model/121732-single-hand-joy-con-adapter-left-hand\"\nextract_info \"https://www.printables.com/model/482394-ps4-controller-modification\"\nextract_info \"https://www.printables.com/model/1002274-thumbstick-topper-system-for-multiple-controllers\"\nextract_info \"https://www.printables.com/model/214859-open-rocker-switch\"\nextract_info \"https://www.printables.com/model/1368117-ps5-one-handed-clip-on-adapter-right-handed\"\nextract_info \"https://www.printables.com/model/255246-d-pad-joystick-clip-for-xbox-adaptive-controller\"\nextract_info \"https://www.printables.com/model/678514-playstation-adaptive-controller-toppers\"\nextract_info \"https://www.printables.com/model/259745-xbox-adaptive-controller-stick\"\nextract_info \"https://www.printables.com/model/755917-easy-to-assemble-adaptive-switch-xbox-controller\"\nextract_info \"https://www.printables.com/model/259740-xbox-adaptive-controller-directional-keypad\"\nextract_info \"https://www.printables.com/model/204009-left-handed-xbox-series-x_s-controllerstl\"\n\nEOF)",
      "Bash(/tmp/fetch_all_printables.sh)",
      "Bash(/tmp/extract_meta.sh << 'EOF'\n#!/bin/bash\n\nget_meta\\(\\) {\n    local url=\"$1\"\n    echo \"### $\\(echo $url | grep -oP 'model/\\\\K[0-9]+'\\): $\\(echo $url | sed 's/.*model\\\\/[0-9]*-//' | sed 's/-/ /g'\\)\"\n    \n    html=$\\(curl -s -L -A \"Mozilla/5.0\" \"$url\"\\)\n    \n    # OG and Twitter meta tags\n    og_title=$\\(echo \"$html\" | grep -oP 'property=\"og:title\" content=\"\\\\K[^\"]+'\\)\n    og_desc=$\\(echo \"$html\" | grep -oP 'property=\"og:description\" content=\"\\\\K[^\"]+'\\)\n    og_img=$\\(echo \"$html\" | grep -oP 'property=\"og:image\" content=\"\\\\K[^\"]+'\\)\n    tw_img=$\\(echo \"$html\" | grep -oP 'name=\"twitter:image\" content=\"\\\\K[^\"]+'\\)\n    \n    # Keywords/tags\n    keywords=$\\(echo \"$html\" | grep -oP 'name=\"keywords\" content=\"\\\\K[^\"]+'\\)\n    \n    [ -n \"$og_title\" ] && echo \"**Title:** $og_title\"\n    [ -n \"$og_desc\" ] && echo \"**Description:** $og_desc\"\n    [ -n \"$og_img\" ] && echo \"**Image:** $og_img\"\n    [ -z \"$og_img\" ] && [ -n \"$tw_img\" ] && echo \"**Image:** $tw_img\"\n    [ -n \"$keywords\" ] && echo \"**Tags:** $keywords\"\n    \n    echo \"\"\n}\n\n# Sample of different projects\nget_meta \"https://www.printables.com/model/121742-sheikah-slate-accessibility-adapter\"\nget_meta \"https://www.printables.com/model/704535-quirkey-v4-accessibility-keyboard-for-one-handed-u\"\nget_meta \"https://www.printables.com/model/93460-xbox-controller-accessibility-mod\"\nget_meta \"https://www.printables.com/model/220907-xboxpc-copilot-controller-pedals\"\n\nEOF)",
      "Bash(/tmp/extract_meta.sh:*)"
    ]
  }
}
